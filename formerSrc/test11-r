% Park according to the number on the guided mark

drive  @v 0.2 :($irdistfrontmiddle<0.45) % 0.45 
stop
% get guided mark seen by the camera. Note camserver should run at this time
get "guidemark" :($guidemarkok>1)
wait 5

if the guide mark is found the command will return the code 
in the $guidemarkok variable otherwise it will be less than 1

% Switch case 
switch ($guidemarkok)

% move fwd 0.5
case 1 
turn 180 @v 0.2  % After reading code turn it back
stop
fwd 0.5 % move it 0.5 
turn -180 @v 0.2 % turn it again to face it towards front
followline "bl" @v 0.3 :($crossingblackline==1) % follow left line
stop
fwd 0.25 @v 0.3
stop
turn -90 @v 0.3
drive @v 0.2 :($drivendist>0.1)
stop

% move fwd 1, bm and bl
case 2
turn 180 @v 0.2
stop
fwd 1
turn -180 @v 0.2
followline "bl" @v 0.3 :($crossingblackline==1)
stop

fwd 0.3 @v 0.2
followline "bm" @v 0.3 :($crossingblackline==1)
stop
fwd 0.25 @v 0.3
stop
turn -90 @v 0.3
drive @v 0.3 :($drivendist>0.1)
stop

case 3
turn 180 @v 0.2
stop
fwd 1
turn -180 @v 0.2
followline "bl" @v 0.3 :($crossingblackline==1)
stop
fwd 0.3 @v 0.3
followline "bm" @v 0.3 :($crossingblackline==1)
stop
fwd 0.3 @v 0.3
followline "br" @v 0.3 :($crossingblackline==1)
stop
fwd 0.25 @v 0.2
stop
turn -90 @v 0.2
drive @v 0.3 :($drivendist>0.1)
stop

case 4
turn 180 @v 0.2
stop
fwd 1
turn -180 @v 0.2
followline "bl" @v 0.3 :($crossingblackline==1)
stop
fwd 0.3 @v 0.2
followline "bm" @v 0.3 :($crossingblackline==1)
stop
fwd 0.3 @v 0.2
followline "bm" @v 0.3 :($crossingblackline==1)
stop
fwd 0.3 @v 0.3
followline "bm" @v 0.3 :($crossingblackline==1)
stop
fwd 0.25 @v 0.3
stop
turn -90 @v 0.2
drive @v 0.3 :($drivendist>0.1)
stop
endswitch

